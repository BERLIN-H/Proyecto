{"ast":null,"code":"var _jsxFileName = \"/Users/eduardosierra/Documents/ProAvanzadaProyectos/Proyecto/frontend/src/components/AppointmentsList.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { CheckCircle, XCircle, Phone } from 'lucide-react';\nimport { useWhatsAppService } from '../hooks/useWhatsAppService'; // Asegúrate de tener este hook creado\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppointmentsList = ({\n  appointments,\n  user,\n  updateAppointment\n}) => {\n  _s();\n  const {\n    sendConfirmationMessage\n  } = useWhatsAppService();\n  const handleConfirm = async appointment => {\n    try {\n      await updateAppointment(appointment.id, {\n        status: 'confirmed',\n        reminder_sent: true\n      });\n\n      // Enviar mensaje de confirmación por WhatsApp\n      await sendConfirmationMessage(appointment);\n      alert('✅ Cita confirmada y mensaje enviado por WhatsApp');\n    } catch (error) {\n      alert('❌ Error al confirmar o enviar mensaje: ' + error.message);\n    }\n  };\n  const handleCancel = async appointment => {\n    try {\n      await updateAppointment(appointment.id, {\n        status: 'cancelled'\n      });\n      alert('🚫 Cita cancelada');\n    } catch (error) {\n      alert('❌ Error al cancelar: ' + error.message);\n    }\n  };\n  const handleWhatsApp = appointment => {\n    const message = encodeURIComponent(`Hola ${appointment.client_name}, te recordamos tu cita para el ${appointment.date} a las ${appointment.time} con MindCare.`);\n    const phone = appointment.client_phone.replace(/\\D/g, '');\n    const whatsappURL = `https://wa.me/${phone}?text=${message}`;\n    window.open(whatsappURL, '_blank');\n  };\n  const myAppointments = user.role === 'admin' ? appointments : appointments.filter(a => a.client_email === user.email || a.client_phone === user.phone);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto bg-white rounded-3xl shadow-xl p-6 border border-slate-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-slate-800 mb-6\",\n      children: \"Listado de Citas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), myAppointments.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-slate-600\",\n      children: \"No hay citas para mostrar.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"space-y-4\",\n      children: myAppointments.map(appointment => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"border border-slate-100 rounded-xl p-4 bg-slate-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-slate-800\",\n            children: appointment.service_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-sm font-medium px-3 py-1 rounded-full ${appointment.status === 'confirmed' ? 'bg-green-100 text-green-800' : appointment.status === 'cancelled' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`,\n            children: appointment.status === 'confirmed' ? 'Confirmada' : appointment.status === 'cancelled' ? 'Cancelada' : 'Pendiente'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-600 text-sm mb-1\",\n          children: [\"\\uD83D\\uDCC5 \", appointment.date, \" \\uD83D\\uDD52 \", appointment.time]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-600 text-sm\",\n          children: [\"\\uD83D\\uDC64 \", appointment.client_name, \" | \\uD83D\\uDCDE \", appointment.client_phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }, this), user.role === 'admin' && appointment.status !== 'cancelled' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 flex space-x-3\",\n          children: [appointment.status !== 'confirmed' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleConfirm(appointment),\n            className: \"flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 23\n            }, this), \"Confirmar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleCancel(appointment),\n            className: \"flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700\",\n            children: [/*#__PURE__*/_jsxDEV(XCircle, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 21\n            }, this), \"Cancelar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleWhatsApp(appointment),\n            className: \"flex items-center px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700\",\n            children: [/*#__PURE__*/_jsxDEV(Phone, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 21\n            }, this), \"WhatsApp\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this)]\n      }, appointment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(AppointmentsList, \"mGYKzn5R/xXxbplnF4gRviFTPno=\", false, function () {\n  return [useWhatsAppService];\n});\n_c = AppointmentsList;\nexport default AppointmentsList;\nvar _c;\n$RefreshReg$(_c, \"AppointmentsList\");","map":{"version":3,"names":["React","CheckCircle","XCircle","Phone","useWhatsAppService","jsxDEV","_jsxDEV","AppointmentsList","appointments","user","updateAppointment","_s","sendConfirmationMessage","handleConfirm","appointment","id","status","reminder_sent","alert","error","message","handleCancel","handleWhatsApp","encodeURIComponent","client_name","date","time","phone","client_phone","replace","whatsappURL","window","open","myAppointments","role","filter","a","client_email","email","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","service_name","onClick","_c","$RefreshReg$"],"sources":["/Users/eduardosierra/Documents/ProAvanzadaProyectos/Proyecto/frontend/src/components/AppointmentsList.jsx"],"sourcesContent":["import React from 'react';\nimport { CheckCircle, XCircle, Phone } from 'lucide-react';\nimport { useWhatsAppService } from '../hooks/useWhatsAppService'; // Asegúrate de tener este hook creado\n\nconst AppointmentsList = ({ appointments, user, updateAppointment }) => {\n  const { sendConfirmationMessage } = useWhatsAppService();\n\n  const handleConfirm = async (appointment) => {\n    try {\n      await updateAppointment(appointment.id, {\n        status: 'confirmed',\n        reminder_sent: true,\n      });\n\n      // Enviar mensaje de confirmación por WhatsApp\n      await sendConfirmationMessage(appointment);\n\n      alert('✅ Cita confirmada y mensaje enviado por WhatsApp');\n    } catch (error) {\n      alert('❌ Error al confirmar o enviar mensaje: ' + error.message);\n    }\n  };\n\n  const handleCancel = async (appointment) => {\n    try {\n      await updateAppointment(appointment.id, {\n        status: 'cancelled',\n      });\n      alert('🚫 Cita cancelada');\n    } catch (error) {\n      alert('❌ Error al cancelar: ' + error.message);\n    }\n  };\n\n  const handleWhatsApp = (appointment) => {\n    const message = encodeURIComponent(\n      `Hola ${appointment.client_name}, te recordamos tu cita para el ${appointment.date} a las ${appointment.time} con MindCare.`\n    );\n    const phone = appointment.client_phone.replace(/\\D/g, '');\n    const whatsappURL = `https://wa.me/${phone}?text=${message}`;\n    window.open(whatsappURL, '_blank');\n  };\n\n  const myAppointments = user.role === 'admin'\n    ? appointments\n    : appointments.filter(a =>\n        a.client_email === user.email || a.client_phone === user.phone\n      );\n\n  return (\n    <div className=\"max-w-4xl mx-auto bg-white rounded-3xl shadow-xl p-6 border border-slate-200\">\n      <h2 className=\"text-2xl font-bold text-slate-800 mb-6\">Listado de Citas</h2>\n\n      {myAppointments.length === 0 ? (\n        <p className=\"text-slate-600\">No hay citas para mostrar.</p>\n      ) : (\n        <ul className=\"space-y-4\">\n          {myAppointments.map((appointment) => (\n            <li key={appointment.id} className=\"border border-slate-100 rounded-xl p-4 bg-slate-50\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <h3 className=\"text-lg font-semibold text-slate-800\">{appointment.service_name}</h3>\n                <span className={`text-sm font-medium px-3 py-1 rounded-full ${\n                  appointment.status === 'confirmed' ? 'bg-green-100 text-green-800' :\n                  appointment.status === 'cancelled' ? 'bg-red-100 text-red-800' :\n                  'bg-yellow-100 text-yellow-800'\n                }`}>\n                  {appointment.status === 'confirmed'\n                    ? 'Confirmada'\n                    : appointment.status === 'cancelled'\n                    ? 'Cancelada'\n                    : 'Pendiente'}\n                </span>\n              </div>\n\n              <p className=\"text-slate-600 text-sm mb-1\">\n                📅 {appointment.date} 🕒 {appointment.time}\n              </p>\n              <p className=\"text-slate-600 text-sm\">\n                👤 {appointment.client_name} | 📞 {appointment.client_phone}\n              </p>\n\n              {user.role === 'admin' && appointment.status !== 'cancelled' && (\n                <div className=\"mt-3 flex space-x-3\">\n                  {appointment.status !== 'confirmed' && (\n                    <button\n                      onClick={() => handleConfirm(appointment)}\n                      className=\"flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700\"\n                    >\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\n                      Confirmar\n                    </button>\n                  )}\n                  <button\n                    onClick={() => handleCancel(appointment)}\n                    className=\"flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700\"\n                  >\n                    <XCircle className=\"w-4 h-4 mr-2\" />\n                    Cancelar\n                  </button>\n                  <button\n                    onClick={() => handleWhatsApp(appointment)}\n                    className=\"flex items-center px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700\"\n                  >\n                    <Phone className=\"w-4 h-4 mr-2\" />\n                    WhatsApp\n                  </button>\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default AppointmentsList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}